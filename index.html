<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Product Creation - E-commerce Backend</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 20px;
      }

      .container {
        max-width: 1400px;
        margin: 0 auto;
        background: white;
        border-radius: 15px;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        overflow: hidden;
      }

      .header {
        background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
        color: white;
        padding: 30px;
        text-align: center;
      }

      .header h1 {
        font-size: 2.5rem;
        margin-bottom: 10px;
        font-weight: 300;
      }

      .header p {
        font-size: 1.1rem;
        opacity: 0.9;
      }

      .form-container {
        padding: 40px;
      }

      .form-section {
        margin-bottom: 40px;
        padding: 30px;
        border: 2px solid #ecf0f1;
        border-radius: 10px;
        background: #fafbfc;
      }

      .section-title {
        font-size: 1.5rem;
        color: #2c3e50;
        margin-bottom: 25px;
        padding-bottom: 10px;
        border-bottom: 3px solid #3498db;
        display: flex;
        align-items: center;
      }

      .section-title::before {
        content: "üìã";
        margin-right: 15px;
        font-size: 1.8rem;
      }

      .form-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        margin-bottom: 20px;
      }

      .form-group {
        margin-bottom: 20px;
      }

      .form-group label {
        display: block;
        margin-bottom: 8px;
        font-weight: 600;
        color: #34495e;
        font-size: 0.95rem;
      }

      .form-group input,
      .form-group select,
      .form-group textarea {
        width: 100%;
        padding: 12px 15px;
        border: 2px solid #ddd;
        border-radius: 8px;
        font-size: 1rem;
        transition: all 0.3s ease;
        background: white;
      }

      .form-group input:focus,
      .form-group select:focus,
      .form-group textarea:focus {
        outline: none;
        border-color: #3498db;
        box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
      }

      .form-group textarea {
        resize: vertical;
        min-height: 100px;
      }

      .checkbox-group {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 15px;
      }

      .checkbox-group input[type="checkbox"] {
        width: auto;
        margin: 0;
      }

      .checkbox-group label {
        margin: 0;
        font-weight: 500;
      }

      .file-upload {
        border: 2px dashed #bdc3c7;
        border-radius: 10px;
        padding: 30px;
        text-align: center;
        background: #f8f9fa;
        transition: all 0.3s ease;
        cursor: pointer;
      }

      .file-upload:hover {
        border-color: #3498db;
        background: #ebf3fd;
      }

      .file-upload input[type="file"] {
        display: none;
      }

      .file-upload-icon {
        font-size: 3rem;
        color: #95a5a6;
        margin-bottom: 15px;
      }

      .file-upload-text {
        color: #7f8c8d;
        font-size: 1.1rem;
      }

      .variant-section {
        background: #fff;
        border: 2px solid #e8f4fd;
        border-radius: 10px;
        padding: 25px;
        margin-bottom: 20px;
        position: relative;
      }

      .variant-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        padding-bottom: 15px;
        border-bottom: 2px solid #ecf0f1;
      }

      .variant-title {
        font-size: 1.3rem;
        color: #2c3e50;
        font-weight: 600;
      }

      .remove-variant {
        background: #e74c3c;
        color: white;
        border: none;
        padding: 8px 15px;
        border-radius: 6px;
        cursor: pointer;
        font-size: 0.9rem;
        transition: all 0.3s ease;
      }

      .remove-variant:hover {
        background: #c0392b;
        transform: scale(1.05);
      }

      .variant-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 15px;
      }

      .add-variant-btn {
        background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
        color: white;
        border: none;
        padding: 15px 30px;
        border-radius: 8px;
        font-size: 1.1rem;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 10px;
        margin: 20px 0;
      }

      .add-variant-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 20px rgba(46, 204, 113, 0.3);
      }

      .add-variant-btn::before {
        content: "‚ûï";
        font-size: 1.2rem;
      }

      .attributes-section {
        background: #fff3cd;
        border: 2px solid #ffeaa7;
        border-radius: 10px;
        padding: 25px;
        margin-bottom: 20px;
      }

      .attribute-item {
        display: flex;
        align-items: center;
        gap: 15px;
        margin-bottom: 15px;
        padding: 15px;
        background: white;
        border-radius: 8px;
        border: 1px solid #ddd;
      }

      .attribute-item input {
        flex: 1;
      }

      .attribute-item select {
        width: 150px;
      }

      .add-attribute-btn {
        background: #f39c12;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 6px;
        cursor: pointer;
        font-size: 0.9rem;
        transition: all 0.3s ease;
      }

      .add-attribute-btn:hover {
        background: #e67e22;
      }

      .submit-section {
        text-align: center;
        padding: 30px;
        background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        border-radius: 10px;
      }

      .submit-btn {
        background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
        color: white;
        border: none;
        padding: 18px 50px;
        border-radius: 10px;
        font-size: 1.3rem;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
      }

      .submit-btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 10px 25px rgba(52, 152, 219, 0.4);
      }

      .preview-section {
        background: #e8f5e8;
        border: 2px solid #a8e6cf;
        border-radius: 10px;
        padding: 25px;
        margin-bottom: 20px;
      }

      .preview-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
      }

      .preview-item {
        background: white;
        padding: 15px;
        border-radius: 8px;
        border: 1px solid #ddd;
        text-align: center;
      }

      .preview-item img {
        width: 100%;
        height: 150px;
        object-fit: cover;
        border-radius: 6px;
        margin-bottom: 10px;
      }

      .preview-item video {
        width: 100%;
        height: 150px;
        object-fit: cover;
        border-radius: 6px;
        margin-bottom: 10px;
      }

      .status-indicator {
        display: inline-block;
        width: 12px;
        height: 12px;
        border-radius: 50%;
        margin-right: 8px;
      }

      .status-active {
        background: #27ae60;
      }
      .status-inactive {
        background: #e74c3c;
      }

      .attribute-type-card {
        background: white;
        border: 2px solid #e8f4fd;
        border-radius: 8px;
        padding: 20px;
        margin-bottom: 15px;
        position: relative;
      }

      .attribute-type-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
        padding-bottom: 10px;
        border-bottom: 1px solid #ecf0f1;
      }

      .attribute-type-name {
        font-weight: 600;
        color: #2c3e50;
        font-size: 1.1rem;
      }

      .attribute-type-required {
        background: #3498db;
        color: white;
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 0.8rem;
      }

      .attribute-type-optional {
        background: #95a5a6;
        color: white;
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 0.8rem;
      }

      .attribute-values {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        margin-bottom: 15px;
      }

      .attribute-value-tag {
        background: #ecf0f1;
        color: #2c3e50;
        padding: 6px 12px;
        border-radius: 20px;
        font-size: 0.9rem;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .remove-value {
        background: #e74c3c;
        color: white;
        border: none;
        border-radius: 50%;
        width: 18px;
        height: 18px;
        cursor: pointer;
        font-size: 0.8rem;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .remove-value:hover {
        background: #c0392b;
      }

      .remove-attribute-type {
        background: #e74c3c;
        color: white;
        border: none;
        padding: 6px 12px;
        border-radius: 4px;
        cursor: pointer;
        font-size: 0.8rem;
        transition: all 0.3s ease;
      }

      .remove-attribute-type:hover {
        background: #c0392b;
      }

      .variant-attributes {
        background: #f8f9fa;
        border: 1px solid #dee2e6;
        border-radius: 8px;
        padding: 20px;
        margin-bottom: 20px;
      }

      .variant-attribute-row {
        display: flex;
        align-items: center;
        gap: 15px;
        margin-bottom: 15px;
        padding: 10px;
        background: white;
        border-radius: 6px;
        border: 1px solid #e9ecef;
      }

      .variant-attribute-label {
        font-weight: 600;
        color: #495057;
        min-width: 120px;
      }

      .variant-attribute-select {
        flex: 1;
        padding: 8px 12px;
        border: 1px solid #ced4da;
        border-radius: 4px;
        background: white;
      }

      .info-box {
        background: #d1ecf1;
        border: 1px solid #bee5eb;
        border-radius: 8px;
        padding: 15px;
        margin-bottom: 20px;
        color: #0c5460;
      }

      .info-box h4 {
        margin-bottom: 10px;
        color: #0c5460;
      }

      .info-box ul {
        margin-left: 20px;
      }

      .info-box li {
        margin-bottom: 5px;
      }

      @media (max-width: 768px) {
        .form-grid {
          grid-template-columns: 1fr;
        }

        .variant-grid {
          grid-template-columns: 1fr;
        }

        .container {
          margin: 10px;
          border-radius: 10px;
        }

        .form-container {
          padding: 20px;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>üõçÔ∏è Product Creation Dashboard</h1>
        <p>
          Create and manage products with variants, attributes, images, and
          videos
        </p>
      </div>

      <div class="form-container">
        <form id="productForm">
          <!-- Basic Product Information -->
          <div class="form-section">
            <h2 class="section-title">Basic Product Information</h2>
            <div class="form-grid">
              <div class="form-group">
                <label for="productName">Product Name *</label>
                <input
                  type="text"
                  id="productName"
                  name="productName"
                  placeholder="e.g., AirPods Pro"
                  required
                />
              </div>
              <div class="form-group">
                <label for="shortDescription">Short Description *</label>
                <input
                  type="text"
                  id="shortDescription"
                  name="shortDescription"
                  placeholder="Brief product description"
                  required
                />
              </div>
              <div class="form-group">
                <label for="sku">SKU</label>
                <input
                  type="text"
                  id="sku"
                  name="sku"
                  placeholder="Auto-generated if empty"
                />
              </div>
              <div class="form-group">
                <label for="barcode">Barcode</label>
                <input
                  type="text"
                  id="barcode"
                  name="barcode"
                  placeholder="Product barcode"
                />
              </div>
              <div class="form-group">
                <label for="basePrice">Base Price *</label>
                <input
                  type="number"
                  id="basePrice"
                  name="basePrice"
                  step="0.01"
                  placeholder="0.00"
                  required
                />
              </div>
              <div class="form-group">
                <label for="compareAtPrice">Compare At Price</label>
                <input
                  type="number"
                  id="compareAtPrice"
                  name="compareAtPrice"
                  step="0.01"
                  placeholder="0.00"
                />
              </div>
              <div class="form-group">
                <label for="costPrice">Cost Price</label>
                <input
                  type="number"
                  id="costPrice"
                  name="costPrice"
                  step="0.01"
                  placeholder="0.00"
                />
              </div>
              <div class="form-group">
                <label for="stockQuantity">Base Stock Quantity</label>
                <input
                  type="number"
                  id="stockQuantity"
                  name="stockQuantity"
                  placeholder="0"
                />
              </div>
              <div class="form-group">
                <label for="lowStockThreshold">Low Stock Threshold</label>
                <input
                  type="number"
                  id="lowStockThreshold"
                  name="lowStockThreshold"
                  placeholder="5"
                />
              </div>
              <div class="form-group">
                <label for="model">Model</label>
                <input
                  type="text"
                  id="model"
                  name="model"
                  placeholder="Product model"
                />
              </div>
              <div class="form-group">
                <label for="slug">Slug</label>
                <input
                  type="text"
                  id="slug"
                  name="slug"
                  placeholder="URL-friendly slug"
                />
              </div>
            </div>

            <div class="form-group">
              <label for="fullDescription">Full Description</label>
              <textarea
                id="fullDescription"
                name="fullDescription"
                placeholder="Detailed product description..."
              ></textarea>
            </div>

            <div class="checkbox-group">
              <input type="checkbox" id="isActive" name="isActive" checked />
              <label for="isActive">Active</label>
            </div>
            <div class="checkbox-group">
              <input type="checkbox" id="isFeatured" name="isFeatured" />
              <label for="isFeatured">Featured</label>
            </div>
            <div class="checkbox-group">
              <input type="checkbox" id="isBestseller" name="isBestseller" />
              <label for="isBestseller">Bestseller</label>
            </div>
            <div class="checkbox-group">
              <input type="checkbox" id="isNewArrival" name="isNewArrival" />
              <label for="isNewArrival">New Arrival</label>
            </div>
            <div class="checkbox-group">
              <input type="checkbox" id="isOnSale" name="isOnSale" />
              <label for="isOnSale">On Sale</label>
            </div>
          </div>

          <!-- Category and Brand Selection -->
          <div class="form-section">
            <h2 class="section-title">Category & Brand</h2>
            <div class="form-grid">
              <div class="form-group">
                <label for="category">Category *</label>
                <select id="category" name="category" required>
                  <option value="">Select Category</option>
                  <option value="electronics">Electronics</option>
                  <option value="audio">Audio</option>
                  <option value="headphones">Headphones</option>
                  <option value="smartphones">Smartphones</option>
                  <option value="computers">Computers</option>
                </select>
              </div>
              <div class="form-group">
                <label for="brand">Brand *</label>
                <select id="brand" name="brand" required>
                  <option value="">Select Brand</option>
                  <option value="apple">Apple</option>
                  <option value="samsung">Samsung</option>
                  <option value="sony">Sony</option>
                  <option value="bose">Bose</option>
                  <option value="microsoft">Microsoft</option>
                </select>
              </div>
            </div>
          </div>

          <!-- Product Attributes -->
          <div class="form-section">
            <h2 class="section-title">Product Attributes</h2>

            <div class="info-box">
              <h4>üí° How Attributes Work:</h4>
              <ul>
                <li>
                  <strong>Attribute Types:</strong> Define what characteristics
                  your product has (e.g., Color, Size, Capacity)
                </li>
                <li>
                  <strong>Attribute Values:</strong> The specific options for
                  each type (e.g., Red/Blue for Color, S/M/L for Size)
                </li>
                <li>
                  <strong>Variants:</strong> Each combination of attribute
                  values creates a product variant
                </li>
                <li>
                  <strong>Example:</strong> Color: Red + Size: Large = Red Large
                  variant
                </li>
              </ul>
            </div>

            <div class="attributes-section">
              <div class="attribute-item">
                <input
                  type="text"
                  id="newAttributeType"
                  placeholder="Attribute Type (e.g., Color, Size, Capacity, Max Volume)"
                  class="attribute-type"
                />
                <select id="newAttributeRequired" class="attribute-required">
                  <option value="false">Optional</option>
                  <option value="true">Required</option>
                </select>
                <button
                  type="button"
                  class="add-attribute-btn"
                  onclick="addAttributeType()"
                >
                  Add Type
                </button>
              </div>

              <div class="attribute-item">
                <input
                  type="text"
                  id="newAttributeValue"
                  placeholder="Attribute Value (e.g., Red, Blue, Large, 128GB)"
                  class="attribute-value"
                />
                <select id="attributeTypeSelect" class="attribute-type-select">
                  <option value="">Select Type</option>
                </select>
                <button
                  type="button"
                  class="add-attribute-btn"
                  onclick="addAttributeValue()"
                >
                  Add Value
                </button>
              </div>
            </div>

            <div id="attributeTypesContainer">
              <!-- Attribute types will be displayed here -->
            </div>
          </div>

          <!-- Product Variants -->
          <div class="form-section">
            <h2 class="section-title">Product Variants</h2>

            <div class="info-box">
              <h4>üîÑ Variant Generation:</h4>
              <ul>
                <li>
                  Variants are automatically generated based on your attribute
                  combinations
                </li>
                <li>
                  Each variant can have different prices, stock levels, and
                  images
                </li>
                <li>
                  You can customize individual variant details after generation
                </li>
                <li><strong>At least one variant is required!</strong></li>
              </ul>
            </div>

            <div id="variantsContainer">
              <!-- Variants will be added here dynamically -->
            </div>

            <button
              type="button"
              class="add-variant-btn"
              onclick="generateVariants()"
            >
              üîÑ Generate Variants from Attributes
            </button>
          </div>

          <!-- Product Images -->
          <div class="form-section">
            <h2 class="section-title">Product Images</h2>
            <div class="form-group">
              <label>Main Product Images</label>
              <div
                class="file-upload"
                onclick="document.getElementById('mainImages').click()"
              >
                <div class="file-upload-icon">üì∑</div>
                <div class="file-upload-text">
                  Click to upload main product images<br /><small
                    >Supports: JPG, PNG, WebP (Max: 10MB each)</small
                  >
                </div>
                <input
                  type="file"
                  id="mainImages"
                  name="mainImages"
                  multiple
                  accept="image/*"
                />
              </div>
            </div>
            <div class="preview-section">
              <h4>Image Preview</h4>
              <div class="preview-grid" id="mainImagesPreview">
                <!-- Image previews will be shown here -->
              </div>
            </div>
          </div>

          <!-- Product Videos -->
          <div class="form-section">
            <h2 class="section-title">Product Videos</h2>
            <div class="form-group">
              <label>Product Videos</label>
              <div
                class="file-upload"
                onclick="document.getElementById('productVideos').click()"
              >
                <div class="file-upload-icon">üé•</div>
                <div class="file-upload-text">
                  Click to upload product videos<br /><small
                    >Supports: MP4, WebM (Max: 50MB, Max Duration: 30s)</small
                  >
                </div>
                <input
                  type="file"
                  id="productVideos"
                  name="productVideos"
                  multiple
                  accept="video/*"
                />
              </div>
            </div>
            <div class="preview-section">
              <h4>Video Preview</h4>
              <div class="preview-grid" id="videosPreview">
                <!-- Video previews will be shown here -->
              </div>
            </div>
          </div>

          <!-- Product Details -->
          <div class="form-section">
            <h2 class="section-title">Product Details</h2>
            <div class="form-grid">
              <div class="form-group">
                <label for="dimensions">Dimensions (cm)</label>
                <input
                  type="text"
                  id="dimensions"
                  name="dimensions"
                  placeholder="e.g., 5.4 x 4.5 x 2.1"
                />
              </div>
              <div class="form-group">
                <label for="weight">Weight (kg)</label>
                <input
                  type="number"
                  id="weight"
                  name="weight"
                  step="0.001"
                  placeholder="0.056"
                />
              </div>
              <div class="form-group">
                <label for="material">Material</label>
                <input
                  type="text"
                  id="material"
                  name="material"
                  placeholder="e.g., Plastic, Silicone"
                />
              </div>
              <div class="form-group">
                <label for="warranty">Warranty</label>
                <input
                  type="text"
                  id="warranty"
                  name="warranty"
                  placeholder="e.g., 1 year limited warranty"
                />
              </div>
            </div>
            <div class="form-group">
              <label for="careInstructions">Care Instructions</label>
              <textarea
                id="careInstructions"
                name="careInstructions"
                placeholder="Product care and maintenance instructions..."
              ></textarea>
            </div>
          </div>

          <!-- SEO & Meta -->
          <div class="form-section">
            <h2 class="section-title">SEO & Meta Information</h2>
            <div class="form-grid">
              <div class="form-group">
                <label for="metaTitle">Meta Title</label>
                <input
                  type="text"
                  id="metaTitle"
                  name="metaTitle"
                  placeholder="SEO title for search engines"
                />
              </div>
              <div class="form-group">
                <label for="metaDescription">Meta Description</label>
                <input
                  type="text"
                  id="metaDescription"
                  name="metaDescription"
                  placeholder="SEO description for search engines"
                />
              </div>
              <div class="form-group">
                <label for="metaKeywords">Meta Keywords</label>
                <input
                  type="text"
                  id="metaKeywords"
                  name="metaKeywords"
                  placeholder="Comma-separated keywords"
                />
              </div>
              <div class="form-group">
                <label for="searchKeywords">Search Keywords</label>
                <input
                  type="text"
                  id="searchKeywords"
                  name="searchKeywords"
                  placeholder="Internal search keywords"
                />
              </div>
            </div>
          </div>

          <!-- Submit Section -->
          <div class="submit-section">
            <button type="submit" class="submit-btn">üöÄ Create Product</button>
          </div>
        </form>
      </div>
    </div>

    <script>
      let variantCounter = 0;
      let attributeTypes = [];
      let attributeValues = {};

      // Initialize with default attributes
      function initializeDefaultAttributes() {
        const defaultTypes = [
          {
            name: "Color",
            required: true,
            values: ["Red", "Blue", "Black", "White"],
          },
          {
            name: "Size",
            required: true,
            values: ["Small", "Medium", "Large"],
          },
        ];

        defaultTypes.forEach((type) => {
          addAttributeTypeToArray(type.name, type.required);
          type.values.forEach((value) => {
            addAttributeValueToArray(type.name, value);
          });
        });

        updateAttributeTypeSelect();
        displayAttributeTypes();
      }

      function addAttributeType() {
        const typeInput = document.getElementById("newAttributeType");
        const requiredSelect = document.getElementById("newAttributeRequired");

        if (!typeInput.value.trim()) {
          alert("Please enter an attribute type name");
          return;
        }

        const typeName = typeInput.value.trim();
        const isRequired = requiredSelect.value === "true";

        addAttributeTypeToArray(typeName, isRequired);
        updateAttributeTypeSelect();
        displayAttributeTypes();

        // Clear input
        typeInput.value = "";
        requiredSelect.value = "false";
      }

      function addAttributeTypeToArray(typeName, isRequired) {
        if (
          !attributeTypes.find(
            (t) => t.name.toLowerCase() === typeName.toLowerCase()
          )
        ) {
          attributeTypes.push({
            name: typeName,
            required: isRequired,
          });
          attributeValues[typeName] = [];
        }
      }

      function addAttributeValue() {
        const valueInput = document.getElementById("newAttributeValue");
        const typeSelect = document.getElementById("attributeTypeSelect");

        if (!valueInput.value.trim()) {
          alert("Please enter an attribute value");
          return;
        }

        if (!typeSelect.value) {
          alert("Please select an attribute type");
          return;
        }

        const valueName = valueInput.value.trim();
        const typeName = typeSelect.value;

        addAttributeValueToArray(typeName, valueName);
        displayAttributeTypes();

        // Clear input
        valueInput.value = "";
        typeSelect.value = "";
      }

      function addAttributeValueToArray(typeName, valueName) {
        if (!attributeValues[typeName]) {
          attributeValues[typeName] = [];
        }

        if (
          !attributeValues[typeName].find(
            (v) => v.toLowerCase() === valueName.toLowerCase()
          )
        ) {
          attributeValues[typeName].push(valueName);
        }
      }

      function updateAttributeTypeSelect() {
        const select = document.getElementById("attributeTypeSelect");
        select.innerHTML = '<option value="">Select Type</option>';

        attributeTypes.forEach((type) => {
          const option = document.createElement("option");
          option.value = type.name;
          option.textContent = type.name;
          select.appendChild(option);
        });
      }

      function displayAttributeTypes() {
        const container = document.getElementById("attributeTypesContainer");
        container.innerHTML = "";

        attributeTypes.forEach((type) => {
          const typeCard = document.createElement("div");
          typeCard.className = "attribute-type-card";

          const values = attributeValues[type.name] || [];

          typeCard.innerHTML = `
            <div class="attribute-type-header">
              <div>
                <span class="attribute-type-name">${type.name}</span>
                <span class="${
                  type.required
                    ? "attribute-type-required"
                    : "attribute-type-optional"
                }">
                  ${type.required ? "Required" : "Optional"}
                </span>
              </div>
              <button type="button" class="remove-attribute-type" onclick="removeAttributeType('${
                type.name
              }')">
                Remove
              </button>
            </div>
            <div class="attribute-values">
              ${values
                .map(
                  (value) => `
                <span class="attribute-value-tag">
                  ${value}
                  <button type="button" class="remove-value" onclick="removeAttributeValue('${type.name}', '${value}')">√ó</button>
                </span>
              `
                )
                .join("")}
            </div>
            <div class="attribute-item">
              <input type="text" placeholder="Add new value for ${
                type.name
              }" class="attribute-value" />
              <button type="button" class="add-attribute-btn" onclick="addValueToType(this, '${
                type.name
              }')">
                Add Value
              </button>
            </div>
          `;

          container.appendChild(typeCard);
        });
      }

      function addValueToType(button, typeName) {
        const input = button.previousElementSibling;
        const value = input.value.trim();

        if (value) {
          addAttributeValueToArray(typeName, value);
          displayAttributeTypes();
          input.value = "";
        }
      }

      function removeAttributeType(typeName) {
        attributeTypes = attributeTypes.filter((t) => t.name !== typeName);
        delete attributeValues[typeName];
        updateAttributeTypeSelect();
        displayAttributeTypes();
        clearVariants();
      }

      function removeAttributeValue(typeName, valueName) {
        if (attributeValues[typeName]) {
          attributeValues[typeName] = attributeValues[typeName].filter(
            (v) => v !== valueName
          );
          displayAttributeTypes();
          clearVariants();
        }
      }

      function generateVariants() {
        if (attributeTypes.length === 0) {
          alert("Please add at least one attribute type first");
          return;
        }

        // Generate all possible combinations
        const combinations = generateCombinations();

        if (combinations.length === 0) {
          alert("Please add values to your attribute types first");
          return;
        }

        clearVariants();

        combinations.forEach((combination, index) => {
          addVariant(combination, index + 1);
        });
      }

      function generateCombinations() {
        const types = attributeTypes.filter(
          (t) => attributeValues[t.name] && attributeValues[t.name].length > 0
        );

        if (types.length === 0) return [];

        const combinations = [];
        const stack = [{}];

        while (stack.length > 0) {
          const current = stack.pop();

          if (Object.keys(current).length === types.length) {
            combinations.push(current);
          } else {
            const nextType = types[Object.keys(current).length];
            const values = attributeValues[nextType.name];

            values.forEach((value) => {
              const newCombination = { ...current };
              newCombination[nextType.name] = value;
              stack.push(newCombination);
            });
          }
        }

        return combinations;
      }

      function addVariant(combination = null, variantNumber = null) {
        if (variantNumber === null) {
          variantCounter++;
          variantNumber = variantCounter;
        }

        const variantHtml = `
          <div class="variant-section" id="variant-${variantNumber}">
            <div class="variant-header">
              <div class="variant-title">
                Variant ${variantNumber}
                ${
                  combination
                    ? `(${Object.values(combination).join(" - ")})`
                    : ""
                }
              </div>
              <button type="button" class="remove-variant" onclick="removeVariant(${variantNumber})">Remove</button>
            </div>
            
            <div class="variant-grid">
              <div class="form-group">
                <label>Variant SKU</label>
                <input type="text" name="variants[${variantNumber}][sku]" placeholder="e.g., AIRPODS-PRO-BLUE-LG">
              </div>
              <div class="form-group">
                <label>Variant Price</label>
                <input type="number" name="variants[${variantNumber}][price]" step="0.01" placeholder="0.00">
              </div>
              <div class="form-group">
                <label>Stock Quantity</label>
                <input type="number" name="variants[${variantNumber}][stockQuantity]" placeholder="0">
              </div>
              <div class="form-group">
                <label>Low Stock Threshold</label>
                <input type="number" name="variants[${variantNumber}][lowStockThreshold]" placeholder="2">
              </div>
              <div class="form-group">
                <label>Sort Order</label>
                <input type="number" name="variants[${variantNumber}][sortOrder]" placeholder="0">
              </div>
              <div class="form-group">
                <label>Active</label>
                <select name="variants[${variantNumber}][active]">
                  <option value="true">Yes</option>
                  <option value="false">No</option>
                </select>
              </div>
            </div>
            
            <!-- Variant Attributes -->
            <div class="variant-attributes">
              <h4>Variant Attributes</h4>
              ${
                combination
                  ? Object.entries(combination)
                      .map(
                        ([type, value]) => `
                <div class="variant-attribute-row">
                  <span class="variant-attribute-label">${type}:</span>
                  <span class="variant-attribute-value">${value}</span>
                  <input type="hidden" name="variants[${variantNumber}][attributes][${type}]" value="${value}">
                </div>
              `
                      )
                      .join("")
                  : ""
              }
            </div>
            
            <!-- Variant Images -->
            <div class="form-group">
              <label>Variant Images</label>
              <div class="file-upload" onclick="document.getElementById('variantImages${variantNumber}').click()">
                <div class="file-upload-icon">üì∑</div>
                <div class="file-upload-text">Click to upload variant images</div>
                <input type="file" id="variantImages${variantNumber}" name="variants[${variantNumber}][images]" multiple accept="image/*">
              </div>
            </div>
          </div>
        `;

        document
          .getElementById("variantsContainer")
          .insertAdjacentHTML("beforeend", variantHtml);
      }

      function removeVariant(variantId) {
        document.getElementById(`variant-${variantId}`).remove();
      }

      function clearVariants() {
        document.getElementById("variantsContainer").innerHTML = "";
        variantCounter = 0;
      }

      // File preview functionality
      document
        .getElementById("mainImages")
        .addEventListener("change", function (e) {
          previewFiles(e.target.files, "mainImagesPreview", "image");
        });

      document
        .getElementById("productVideos")
        .addEventListener("change", function (e) {
          previewFiles(e.target.files, "videosPreview", "video");
        });

      function previewFiles(files, previewId, type) {
        const previewContainer = document.getElementById(previewId);
        previewContainer.innerHTML = "";

        Array.from(files).forEach((file) => {
          const reader = new FileReader();
          const previewItem = document.createElement("div");
          previewItem.className = "preview-item";

          reader.onload = function (e) {
            if (type === "image") {
              previewItem.innerHTML = `
                <img src="${e.target.result}" alt="Preview">
                <div>${file.name}</div>
                <div><small>${(file.size / 1024 / 1024).toFixed(
                  2
                )} MB</small></div>
              `;
            } else {
              previewItem.innerHTML = `
                <video controls>
                  <source src="${e.target.result}" type="${file.type}">
                </video>
                <div>${file.name}</div>
                <div><small>${(file.size / 1024 / 1024).toFixed(
                  2
                )} MB</small></div>
              `;
            }
          };

          reader.readAsDataURL(file);
          previewContainer.appendChild(previewItem);
        });
      }

      // Form submission
      document
        .getElementById("productForm")
        .addEventListener("submit", function (e) {
          e.preventDefault();

          if (attributeTypes.length === 0) {
            alert("Please add at least one attribute type");
            return;
          }

          if (
            document.getElementById("variantsContainer").children.length === 0
          ) {
            alert("Please generate variants first");
            return;
          }

          alert(
            "Product creation form submitted! This is a demo UI - no actual data will be sent."
          );
        });

      // Auto-generate SKU if empty
      document
        .getElementById("productName")
        .addEventListener("input", function (e) {
          const skuField = document.getElementById("sku");
          if (!skuField.value) {
            const sku = e.target.value
              .toUpperCase()
              .replace(/[^A-Z0-9]/g, "-")
              .replace(/-+/g, "-")
              .replace(/^-|-$/g, "");
            skuField.value = sku + "-001";
          }
        });

      // Auto-generate slug if empty
      document
        .getElementById("productName")
        .addEventListener("input", function (e) {
          const slugField = document.getElementById("slug");
          if (!slugField.value) {
            const slug = e.target.value
              .toLowerCase()
              .replace(/[^a-z0-9]/g, "-")
              .replace(/-+/g, "-")
              .replace(/^-|-$/g, "");
            slugField.value = slug;
          }
        });

      // Initialize the page
      document.addEventListener("DOMContentLoaded", function () {
        initializeDefaultAttributes();
      });
    </script>
  </body>
</html>
